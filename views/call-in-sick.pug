extends layout

block content
    - dateOfToday = new Date()





    if alreadyCalledInSick
        p Je hebt je voor vandaag al ziekgemeld.
    else
        div(class="info")
            p Druk op de knop om jezelf ziek te melden voor vandaag - #{dateOfToday}.
            button(type="button" style="btn btn-primary" id="callInSickBtn") Ziekmelden

    script.
        document.onreadystatechange = function () {
            if (document.readyState === "complete") {  
                $('#callInSickBtn').bind('click', function(e) { 
                    callInSick();
                    $('.info').html('<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="sr-only">Laden...</span></div></div>');
                });
                
                function callInSick(){
                    $.post("/call-in-sick", {callInSick: true}, function(result){
                          location.reload(); 
                        });

                }


            }
        }
        