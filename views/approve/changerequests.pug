div(class="card shadow dashboard-timetable change-requests")
    div(class="card-header bg-tertiary " role="button"  data-toggle="collapse" data-target="#collapseChangeRequests"  aria-controls="collapseChangeRequests" aria-expanded="true")
        h3 Vervanging verzoeken
            i(class="fa fa-bell" style="position: absolute;right: 28px;top: 16px;")
    div(class="collapse show" id="collapseChangeRequests" )
        div(class="card-body")
            div(class="table-responsive")
                table(class="table table-hover table-sm")
                    thead(class="bg-secondary")
                        tr
                            th(scope="col") Aanvraag datum
                            th(scope="col") Aanvrager
                            th(scope="col") Begin
                            th(scope="col") Eind
                            th(scope="col") Overgenomen door
                            th(scope="col") Status
                            th(scope="col") Commentaar
                            th(scope="col")  
                            th(scope="col")  
                
                    tbody
                        if(changeRequests !== [])
                            each request in changeRequests
                                - translatedStatus = ""
                                case request.status 
                                    when "AWAITING_APPROVAL" 
                                        - translatedStatus = "Afwachting"
                                    when "AWAITING_REPLACEMENT" 
                                        - translatedStatus = "Niet overgenomen"
                                    when "APPROVED" 
                                        - translatedStatus = "Goedgekeurd";
                                    when "DENIED"
                                        - translatedStatus = "Afgekeurd";
                                - date = "" +new Date(request.creation_datetime).getDate() +"-"+new Date(request.creation_datetime).getMonth()+"-"+new Date(request.creation_datetime).getFullYear()
                                tr(id='change-request-'+request.id ) 
                                    th(scope="col" )  #{date}
                                    th(scope="col" )  #{request.requestingUser.getFullName()}
                                    th(scope="col" )  #{request.timeTableItem.begin_date}
                                    th(scope="col" )  #{request.timeTableItem.end_date} 
                                    th(scope="col" )  
                                        if !(request.status == "AWAITING_REPLACEMENT")
                                             p #{request.replacedByUser.getFullName()}
                                    th(scope="col" )  #{translatedStatus}
                                    th(scope="col") 
                                        if request.status == "AWAITING_APPROVAL"
                                            input(class="form-control " id="status-comment-change-"+request.id)
                                        else
                                            p #{request.comment}
                                    if request.status == "AWAITING_APPROVAL" 
                                        th(scope="col" )
                                                button(class="btn btn-success btn-sm accept-change-request-btn" id=""+request.id) Goedkeuren
                                        th(scope="col" ) 
                                                button( class="btn btn-danger btn-sm deny-change-request-btn" id=""+request.id) Afkeuren
                                    else
                                        th(scope="col")  
                                        th(scope="col")    
                                                            
                        else
                            tr
                                th(scope="col" colspan="10") Geen aanvragen bekend

