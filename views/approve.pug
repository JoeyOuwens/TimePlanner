extends layout

block content
    if(error !== undefined)
        each msg in error
            div(class="alert alert-danger alert-dismissible fade show" role="alert") #{msg}
                button(type="button" class="close" data-dismiss="alert" aria-label="Close")
                    i(class="fa fa-times") 
   
    div(class="card shadow dashboard-timetable")
                div(class="card-header bg-tertiary " role="button"  data-toggle="collapse" data-target="#collapseRequests"  aria-controls="collapseRequests" aria-expanded="true")
                    h3 Vrijedagen aanvragen
                        i(class="fa fa-bell" style="position: absolute;right: 28px;top: 16px;")
                div(class="collapse show" id="collapseRequests" )
                    div(class="card-body")
                        div(class="table-responsive")
                            table(class="table table-hover table-sm")
                                thead(class="bg-secondary")
                                    tr
                                        th(scope="col") Aanvraag datum
                                        th(scope="col") Medewerker
                                        th(scope="col") Van
                                        th(scope="col") Tot
                                        th(scope="col") Reden
                                        th(scope="col") Status
                                        th(scope="col") Comentaar
                                        th(scope="col")  
                                        th(scope="col")  
                
                                tbody
                                    if(dayoffRequests !== [])
                                        each request in dayoffRequests
                                            - popovercontent = "<p>Uur loon:  &euro;" + request.salary 
                                            - popovercontent += "<p>Contract uren: " + request.contract_hours 
                                            - popovercontent += "<p>Email: " + request.email 
                                            - popovercontent += "<p>Telefoon: " + request.phone_number 
                                            tr
                                                form(method="post" )
                                                    th(scope="col" style=activeStyle)  #{request.creation_date}
                                                    th(scope="col" style=activeStyle) 
                                                        a( role="button" data-toggle="popover" data-trigger="hover" data-placement="right"  title=""+request.firstname+" "+request.middlename+" "+request.lastname  data-html='true' data-content=popovercontent ) #{request.firstname} #{request.middlename} #{request.lastname}
                                                    th(scope="col" style=activeStyle)  #{request.from}
                                                    th(scope="col" style=activeStyle)  #{request.till}
                                                    th(scope="col" style=activeStyle)  #{request.reason}
                                                    th(scope="col" style=activeStyle)  #{request.status}
                                                    th(scope="col" style=activeStyle)  #{request.status_comment} 
                                                    if request.status == "In afwachting" 
                                                        th(scope="col" style=activeStyle)
                                                            a(href="/approve/dayoffrequest/approve/"+request.id)
                                                                button(class="btn btn-success btn-sm") Goedkeuren
                                                        th(scope="col" style=activeStyle)
                                                            a(href="/approve/dayoffrequest/deny/"+request.id)
                                                                button(class="btn btn-danger btn-sm") Afkeuren
                                                    else
                                                        th(scope="col")  
                                                        th(scope="col")  
                                                            
                                        else
                                            tr
                                                th(scope="col" style=activeStyle) Geen aanvragen bekend

    script.
        document.onreadystatechange = function () {
            if (document.readyState === "complete") { 
                $(function () {
                  $('[data-toggle="popover"]').popover()
                })

                $('.popover-dismiss').popover({
                     trigger: 'focus'
                })

            }
        }